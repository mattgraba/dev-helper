# The Return to Dev Helper: Note Canvas (10/2)

## Today's Accomplishments
- **Regained clarity + motivation** by solidifying Dev Helper's **Core Philosophy** (intentional usage, critical thinking, fundamentals, anti-vibe-coding). ***Potential future SaaS product to supply a standard industry-grade development/engineering team's workflow.***
- **Refined docs structure** by adding `/docs/overview` and `/docs/architecture`.
- **Completed** `Architecture.md` with:
    - High-level system overview (CLI, API, DB, frontend).
    - Request flow diagram for `analyze` command.
    - Authentication flow (JWT across CLI + frontend).
    - Deployment targets (npm, Vercel, Render, Mongo Atlas).
    - Future extensions (Postgres migration, RBAC, SaaS dashboard).
- **Set a rhythym for documentation-first-engineering** (anchored in Overview + Architecture).

---

## üõ† Dev Helper Tech Stack (Current)
- **CLI**: Node.js + Commander
- **Backend**: Express.js + JWT auth + Axios (to OpenAI API)
- **Database**: MongoDB (Atlas for deployment)
- **Frontend**: React + Tailwind + shadcn/ui
- **Auth**: JWT stored in `~/.dev-helper/config.json` (CLI) & localStorage (frontend)
- **Deployment Targets**:
    - CLI ‚Üí npm package(`@mattgraba/dev-helper`)
    - Frontend ‚Üí Vercel
    - Backend ‚Üí Render/Heroku
    - DB ‚Üí Mongo Atlas

This is a **modern full-stack setup** with a smooth migration path to Postgres if/when we need stronger relational querying for SaaS features.

---

## üìä Mermaid Diagrams in Markdown
- Mermaid is a **diagramming tool** that works directly inside markdown code fences.
- Example (like we used in `Architecture.md`):
```markdown
``mermaid
sequenceDiagram
  participant User
  participant CLI
  participant API
  User->>CLI: dev-helper analyze
  CLI->>API: POST /analyze
  API-->>CLI: JSON response
```
- When viewed on GitHub (or docs tools like MkDocs/Docusaurus), Mermaid will render the diagram inline.
- Supports **sequence diagrams, flowcharts, class diagrams, Gantt charts, ERDs**, etc. ‚Üí super powerful for system docs.

---

## üóÑÔ∏è MongoDB vs. Postgres
- **MongoDB**:
    - Great for flexible schema, JSON-like storage, rapid iteration.
    - Easy to integrate with Node/Express.
    - Fits our current needs for storing prompts/responses/history.
- **Postgres**:
    - Industry standard for SaaS and "serious" production apps.
    - Strong relational integrity, transactions, joins.
    - Needed when we add **multi-tenant SaaS features, RBAC, analytics dashboards, audit logs.**
- **Stick w/ Mongo for MVP**. We'll refactor to Postgres when we add SaaS features. We don't need to prematurely complicate our stack while still in rapid build mode.

---

## üîÆ Tomorrow‚Äôs Deep Dive
- Dockerization of backend + frontend for clean environment parity.
- Cloud deployment workflows (Vercel + Render + alternatives).
- Linux/WSL2 fundamentals for local dev + Docker integration.
- RESTful API mapping (documenting resource-oriented endpoints for Dev Helper).
- Begin task list for Week 1 of the Return

---

## Next ADR Candidates (Starter-Pack Add-Ons)
**ADR-009: Secrets & Configuration Management**
Why: Prevent leaking OpenAI keys/JWT secrets; standardize env handling across CLI, API, frontend.
Decision shape: .env + dotenv for local; Render/Vercel env vars in prod; no secrets in client bundle; rotate keys policy.
Consequences: Safer deployments; requires a secrets checklist.
Path: docs/adrs/ADR-009-secrets-config.md (Status: Proposed)

**ADR-010: Rate Limiting, Retries & Circuit Breakers (OpenAI + API)**
Why: Protect against API spikes, vendor hiccups, and runaway scripts; keep UX predictable.
Decision shape: Per-user rate limits (e.g., token bucket), exponential backoff for OpenAI calls, global circuit breaker with fallback message, idempotency keys for POSTs where applicable.
Consequences: Fewer outages; some added infra/logic.
Path: docs/adrs/ADR-010-limits-retries-circuit-breakers.md (Status: Proposed)

**ADR-011: API Versioning & Pagination Contract**
Why: Lock a stable contract now before the web UI and CLI expand (history filters, search).
Decision shape: Prefix routes with /v1; standard pagination (limit, cursor), consistent error envelope, date filters as ISO strings.
Consequences: Easier future changes; minor upfront doc work.
Path: docs/adrs/ADR-011-api-versioning-pagination.md (Status: Proposed)

**ADR-012: Context Scanning, Privacy & Redaction**
Why: --context can slurp sensitive files; you need rules (include/exclude, size caps).
Decision shape: Default ignore globs (.env, node_modules, *.pem, *.key, large binaries), max file size, explicit allowlist/denylist, on-CLI warning prompts.
Consequences: Safer UX; slightly more config.
Path: docs/adrs/ADR-012-context-privacy-redaction.md (Status: Proposed)

**ADR-013: Prompt Templates & Evaluation**
Why: Keep prompts consistent, testable, and improvable (regressions are real).
Decision shape: Centralize prompt templates, version them, add lightweight prompt ‚Äúgolden set‚Äù tests; track latency & token costs.
Consequences: Better reliability; small testing harness.
Path: docs/adrs/ADR-013-prompts-and-eval.md (Status: Proposed)

**ADR-014: RBAC & Multi-Tenant Foundations (SaaS Track)**
Why: Future org/team mode requires early schema conventions.
Decision shape: Reserve tenantId on all rows, role enums (owner, admin, member), request context carrying userId + tenantId.
Consequences: Smoother migration to Postgres; slight upfront schema tweaks in Mongo.
Path: docs/adrs/ADR-014-rbac-multitenant-foundations.md (Status: Proposed)

---



